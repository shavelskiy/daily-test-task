# Daily test task

### Стэк:

- php 7.4
- symfony 5.4
- Postgres 15.0
- Xdebug 3.2.0

### Workflow

- При первом запуске запустить `make init`, проект соберётся и запустится
- После запуска запустить `make tests` для того, чтобы убедиться в том, что проект правильно запустился
- При работе все команды, который используют php выполнять из контейнера с php
- Во время для проверки кода использовать команду `tests`, если нужна конкретная проверка, то запускать именно её, они все есть в Makefile
- Если во время работы надо пересоздать базу, например из-за ошибки или миграции из другой ветки, то использовать команду `reload-db`

### Команды Make

| Команда          | Описание                                                                           |
| ---------------- | ---------------------------------------------------------------------------------- |
| init             | Запускает проект при первом запуске / пересобирает заново при повторном запуске    |
| start            | Запускает проект                                                                   |
| stop             | Отсанавливает проект                                                               |
| php              | Перейти в контейнер с php                                                          |
| install          | Выполняет composer install внутри контейнера php                                   |
| migrate          | Применяет невыполненные миграции                                                   |
| reload-db        | Пересоздаёт базу данных, выполняет миграции и фикстуры                             |
| schema-validate  | Валидация схемы базы данных                                                        |
| check-autoload   | Проверка автозагрузки классов (namespace, название классов)                        |
| php-fixer        | Запуск php-cs-fixer для code style                                                 |
| psalm            | Запуск статитечкого анализатора psalm для проверки кода                            |
| symfony-lint     | Запуск линтеров symfony: container, yaml                                           |
| phpunit          | Запуск тестов                                                                      |
| phpunit-no-debug | Запуск тестов без Xdebug                                                           |
| tests            | Последовательный запуск check-autoload, php-cs-fixer, psalm, symfony-lint, phpunit |
